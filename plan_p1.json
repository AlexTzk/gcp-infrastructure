{"format_version":"1.2","terraform_version":"1.5.7","variables":{"company":{"value":"mycompany"},"description":{"value":"test"},"env":{"value":"dev"},"gke_cluster_ipv4_cidr":{"value":"10.11.0.0/21"},"mtu":{"value":"1460"},"network_name":{"value":"mynet"},"pri_subnet_cidr":{"value":"10.16.0.0/22"},"pri_vpc_peering_address":{"value":"10.16.5.0"},"project":{"value":"YOUR-PROJECT-123456"},"region":{"value":"europe-west2"},"routing_mode":{"value":"GLOBAL"},"zone":{"value":"europe-west2-a"}},"planned_values":{"outputs":{"NAT-IPs":{"sensitive":false},"network_id":{"sensitive":false},"privatenetwork_subnet":{"sensitive":false,"type":"string","value":"mynet-dev-mycompany-private"}},"root_module":{"child_modules":[{"resources":[{"address":"module.firewall.google_compute_firewall.allow-gke","mode":"managed","type":"google_compute_firewall","name":"allow-gke","provider_name":"registry.terraform.io/hashicorp/google","schema_version":1,"values":{"allow":[{"ports":["2049"],"protocol":"tcp"}],"deny":[],"description":null,"disabled":null,"log_config":[],"name":"mycompany-fw-allow-gke","priority":1000,"project":"YOUR-PROJECT-123456","source_ranges":["10.11.0.0/21"],"source_service_accounts":null,"source_tags":null,"target_service_accounts":null,"target_tags":["allow-gke"],"timeouts":null},"sensitive_values":{"allow":[{"ports":[false]}],"deny":[],"destination_ranges":[],"log_config":[],"source_ranges":[false],"target_tags":[false]}},{"address":"module.firewall.google_compute_firewall.allow-https","mode":"managed","type":"google_compute_firewall","name":"allow-https","provider_name":"registry.terraform.io/hashicorp/google","schema_version":1,"values":{"allow":[{"ports":["443"],"protocol":"tcp"}],"deny":[],"description":null,"disabled":null,"log_config":[],"name":"mycompany-fw-allow-https","priority":1000,"project":"YOUR-PROJECT-123456","source_ranges":["0.0.0.0/0"],"source_service_accounts":null,"source_tags":null,"target_service_accounts":null,"target_tags":["allow-https"],"timeouts":null},"sensitive_values":{"allow":[{"ports":[false]}],"deny":[],"destination_ranges":[],"log_config":[],"source_ranges":[false],"target_tags":[false]}},{"address":"module.firewall.google_compute_firewall.allow-internal","mode":"managed","type":"google_compute_firewall","name":"allow-internal","provider_name":"registry.terraform.io/hashicorp/google","schema_version":1,"values":{"allow":[{"ports":["0-65535"],"protocol":"tcp"},{"ports":["0-65535"],"protocol":"udp"},{"ports":[],"protocol":"icmp"}],"deny":[],"description":null,"disabled":null,"log_config":[{"metadata":"INCLUDE_ALL_METADATA"}],"name":"mycompany-fw-allow-internal","priority":1000,"project":"YOUR-PROJECT-123456","source_ranges":["10.16.0.0/22"],"source_service_accounts":null,"source_tags":null,"target_service_accounts":null,"target_tags":null,"timeouts":null},"sensitive_values":{"allow":[{"ports":[false]},{"ports":[false]},{"ports":[]}],"deny":[],"destination_ranges":[],"log_config":[{}],"source_ranges":[false]}},{"address":"module.firewall.google_compute_firewall.allow-ssh","mode":"managed","type":"google_compute_firewall","name":"allow-ssh","provider_name":"registry.terraform.io/hashicorp/google","schema_version":1,"values":{"allow":[{"ports":["22"],"protocol":"tcp"}],"deny":[],"description":null,"disabled":null,"log_config":[],"name":"mycompany-fw-allow-ssh","priority":1000,"project":"YOUR-PROJECT-123456","source_ranges":["35.235.240.0/20"],"source_service_accounts":null,"source_tags":null,"target_service_accounts":null,"target_tags":["allow-ssh"],"timeouts":null},"sensitive_values":{"allow":[{"ports":[false]}],"deny":[],"destination_ranges":[],"log_config":[],"source_ranges":[false],"target_tags":[false]}}],"address":"module.firewall"},{"resources":[{"address":"module.iam.google_project_iam_binding.bitbucket_role_binding","mode":"managed","type":"google_project_iam_binding","name":"bitbucket_role_binding","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"condition":[],"project":"YOUR-PROJECT-123456"},"sensitive_values":{"condition":[],"members":[]}},{"address":"module.iam.google_project_iam_binding.bitbucket_role_binding_artifact","mode":"managed","type":"google_project_iam_binding","name":"bitbucket_role_binding_artifact","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"condition":[],"project":"YOUR-PROJECT-123456","role":"roles/artifactregistry.writer"},"sensitive_values":{"condition":[],"members":[]}},{"address":"module.iam.google_project_iam_custom_role.bitbucket_role","mode":"managed","type":"google_project_iam_custom_role","name":"bitbucket_role","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"description":"Custom role for Bitbucket pipelines","permissions":["container.clusters.get","container.clusters.getCredentials","container.deployments.get","container.deployments.update","container.ingresses.get","container.ingresses.update","container.services.get","container.services.update","container.statefulSets.get","container.statefulSets.update","iam.serviceAccounts.getAccessToken","run.services.get","run.services.update","storage.buckets.get","storage.objects.create","storage.objects.get","storage.objects.list"],"project":"YOUR-PROJECT-123456","role_id":"bitbucket_role","stage":"GA","title":"Bitbucket Role"},"sensitive_values":{"permissions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]}},{"address":"module.iam.google_project_iam_custom_role.frontend_role","mode":"managed","type":"google_project_iam_custom_role","name":"frontend_role","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"description":"Custom role for Frontend","permissions":["logging.logEntries.list","logging.logs.list","monitoring.metricDescriptors.list","monitoring.timeSeries.list","run.locations.get","run.revisions.get","run.revisions.list","run.routes.get","run.routes.list","run.services.get"],"project":"YOUR-PROJECT-123456","role_id":"frontend_role","stage":"GA","title":"Frontend Role"},"sensitive_values":{"permissions":[false,false,false,false,false,false,false,false,false,false]}},{"address":"module.iam.google_service_account.bitbucket_service_account","mode":"managed","type":"google_service_account","name":"bitbucket_service_account","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"account_id":"bitbucket-service-account","create_ignore_already_exists":null,"description":null,"disabled":false,"display_name":"Bitbucket Service Account","project":"YOUR-PROJECT-123456","timeouts":null},"sensitive_values":{}},{"address":"module.iam.google_service_account_key.bitbucket_service_account_key","mode":"managed","type":"google_service_account_key","name":"bitbucket_service_account_key","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"keepers":null,"key_algorithm":"KEY_ALG_RSA_2048","private_key_type":"TYPE_GOOGLE_CREDENTIALS_FILE","public_key_data":null,"public_key_type":"TYPE_X509_PEM_FILE"},"sensitive_values":{}},{"address":"module.iam.local_file.bitbucket_service_account_key_file","mode":"managed","type":"local_file","name":"bitbucket_service_account_key_file","provider_name":"registry.terraform.io/hashicorp/local","schema_version":0,"values":{"content_base64":null,"directory_permission":"0777","file_permission":"0777","filename":"modules/iam/dev-YOUR-PROJECT-123456-bitbucket-service-account-key.json","sensitive_content":null,"source":null},"sensitive_values":{"content":true}}],"address":"module.iam"},{"resources":[{"address":"module.network.google_compute_address.address[0]","mode":"managed","type":"google_compute_address","name":"address","index":0,"provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"address_type":"EXTERNAL","description":null,"ip_version":null,"ipv6_endpoint_type":null,"labels":null,"name":"nat-manual-ip-0","network":null,"project":"YOUR-PROJECT-123456","region":"europe-west2","timeouts":null},"sensitive_values":{"effective_labels":{},"terraform_labels":{},"users":[]}},{"address":"module.network.google_compute_global_address.loadbalancer_ip","mode":"managed","type":"google_compute_global_address","name":"loadbalancer_ip","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"address_type":null,"description":null,"ip_version":null,"labels":null,"name":"mycompany-dev-lb-ip","network":null,"project":"YOUR-PROJECT-123456","purpose":null,"timeouts":null},"sensitive_values":{"effective_labels":{},"terraform_labels":{}}},{"address":"module.network.google_compute_global_address.private_ip_address","mode":"managed","type":"google_compute_global_address","name":"private_ip_address","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"address":"10.16.5.0","address_type":"INTERNAL","description":null,"ip_version":null,"labels":null,"name":"mycompany-dev-private-services-address","prefix_length":24,"project":"YOUR-PROJECT-123456","purpose":"VPC_PEERING","timeouts":null},"sensitive_values":{"effective_labels":{},"terraform_labels":{}}},{"address":"module.network.google_compute_network.network","mode":"managed","type":"google_compute_network","name":"network","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"auto_create_subnetworks":false,"delete_default_routes_on_create":false,"description":"test","enable_ula_internal_ipv6":null,"mtu":1460,"name":"mynet-dev-mycompany","network_firewall_policy_enforcement_order":"AFTER_CLASSIC_FIREWALL","project":"YOUR-PROJECT-123456","routing_mode":"GLOBAL","timeouts":null},"sensitive_values":{}},{"address":"module.network.google_compute_router.router","mode":"managed","type":"google_compute_router","name":"router","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"bgp":[],"description":null,"encrypted_interconnect_router":null,"name":"mynet-dev-mycompany-nat-router","project":"YOUR-PROJECT-123456","region":"europe-west2","timeouts":null},"sensitive_values":{"bgp":[]}},{"address":"module.network.google_compute_router_nat.nat_manual","mode":"managed","type":"google_compute_router_nat","name":"nat_manual","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"drain_nat_ips":null,"icmp_idle_timeout_sec":30,"log_config":[{"enable":true,"filter":"ERRORS_ONLY"}],"max_ports_per_vm":null,"name":"mynet-dev-mycompany-nat-gw","nat_ip_allocate_option":"MANUAL_ONLY","project":"YOUR-PROJECT-123456","region":"europe-west2","router":"mynet-dev-mycompany-nat-router","rules":[],"source_subnetwork_ip_ranges_to_nat":"LIST_OF_SUBNETWORKS","subnetwork":[{"secondary_ip_range_names":[],"source_ip_ranges_to_nat":["ALL_IP_RANGES"]}],"tcp_established_idle_timeout_sec":1200,"tcp_time_wait_timeout_sec":120,"tcp_transitory_idle_timeout_sec":30,"timeouts":null,"udp_idle_timeout_sec":30},"sensitive_values":{"endpoint_types":[],"log_config":[{}],"nat_ips":[],"rules":[],"subnetwork":[{"secondary_ip_range_names":[],"source_ip_ranges_to_nat":[false]}]}},{"address":"module.network.google_compute_subnetwork.private_subnet","mode":"managed","type":"google_compute_subnetwork","name":"private_subnet","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"description":null,"ip_cidr_range":"10.16.0.0/22","ipv6_access_type":null,"log_config":[{"aggregation_interval":"INTERVAL_15_MIN","filter_expr":"true","flow_sampling":0.5,"metadata":"INCLUDE_ALL_METADATA","metadata_fields":null}],"name":"mynet-dev-mycompany-private","project":"YOUR-PROJECT-123456","region":"europe-west2","role":null,"send_secondary_ip_range_if_empty":null,"timeouts":null},"sensitive_values":{"log_config":[{}],"secondary_ip_range":[]}},{"address":"module.network.google_service_networking_connection.private_vpc_connection","mode":"managed","type":"google_service_networking_connection","name":"private_vpc_connection","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"deletion_policy":null,"reserved_peering_ranges":["mycompany-dev-private-services-address"],"service":"servicenetworking.googleapis.com","timeouts":null,"update_on_creation_fail":null},"sensitive_values":{"reserved_peering_ranges":[false]}}],"address":"module.network"},{"resources":[{"address":"module.project-services.google_project_service.project_services[\"autoscaling.googleapis.com\"]","mode":"managed","type":"google_project_service","name":"project_services","index":"autoscaling.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"autoscaling.googleapis.com","timeouts":null},"sensitive_values":{}},{"address":"module.project-services.google_project_service.project_services[\"compute.googleapis.com\"]","mode":"managed","type":"google_project_service","name":"project_services","index":"compute.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"compute.googleapis.com","timeouts":null},"sensitive_values":{}},{"address":"module.project-services.google_project_service.project_services[\"container.googleapis.com\"]","mode":"managed","type":"google_project_service","name":"project_services","index":"container.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"container.googleapis.com","timeouts":null},"sensitive_values":{}},{"address":"module.project-services.google_project_service.project_services[\"gkehub.googleapis.com\"]","mode":"managed","type":"google_project_service","name":"project_services","index":"gkehub.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"gkehub.googleapis.com","timeouts":null},"sensitive_values":{}},{"address":"module.project-services.google_project_service.project_services[\"iamcredentials.googleapis.com\"]","mode":"managed","type":"google_project_service","name":"project_services","index":"iamcredentials.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"iamcredentials.googleapis.com","timeouts":null},"sensitive_values":{}},{"address":"module.project-services.google_project_service.project_services[\"iap.googleapis.com\"]","mode":"managed","type":"google_project_service","name":"project_services","index":"iap.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"iap.googleapis.com","timeouts":null},"sensitive_values":{}},{"address":"module.project-services.google_project_service.project_services[\"logging.googleapis.com\"]","mode":"managed","type":"google_project_service","name":"project_services","index":"logging.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"logging.googleapis.com","timeouts":null},"sensitive_values":{}},{"address":"module.project-services.google_project_service.project_services[\"monitoring.googleapis.com\"]","mode":"managed","type":"google_project_service","name":"project_services","index":"monitoring.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"monitoring.googleapis.com","timeouts":null},"sensitive_values":{}},{"address":"module.project-services.google_project_service.project_services[\"run.googleapis.com\"]","mode":"managed","type":"google_project_service","name":"project_services","index":"run.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"run.googleapis.com","timeouts":null},"sensitive_values":{}},{"address":"module.project-services.google_project_service.project_services[\"sql-component.googleapis.com\"]","mode":"managed","type":"google_project_service","name":"project_services","index":"sql-component.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"sql-component.googleapis.com","timeouts":null},"sensitive_values":{}},{"address":"module.project-services.google_project_service.project_services[\"storage.googleapis.com\"]","mode":"managed","type":"google_project_service","name":"project_services","index":"storage.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","schema_version":0,"values":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"storage.googleapis.com","timeouts":null},"sensitive_values":{}}],"address":"module.project-services"}]}},"resource_changes":[{"address":"module.firewall.google_compute_firewall.allow-gke","module_address":"module.firewall","mode":"managed","type":"google_compute_firewall","name":"allow-gke","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"allow":[{"ports":["2049"],"protocol":"tcp"}],"deny":[],"description":null,"disabled":null,"log_config":[],"name":"mycompany-fw-allow-gke","priority":1000,"project":"YOUR-PROJECT-123456","source_ranges":["10.11.0.0/21"],"source_service_accounts":null,"source_tags":null,"target_service_accounts":null,"target_tags":["allow-gke"],"timeouts":null},"after_unknown":{"allow":[{"ports":[false]}],"creation_timestamp":true,"deny":[],"destination_ranges":true,"direction":true,"enable_logging":true,"id":true,"log_config":[],"network":true,"self_link":true,"source_ranges":[false],"target_tags":[false]},"before_sensitive":false,"after_sensitive":{"allow":[{"ports":[false]}],"deny":[],"destination_ranges":[],"log_config":[],"source_ranges":[false],"target_tags":[false]}}},{"address":"module.firewall.google_compute_firewall.allow-https","module_address":"module.firewall","mode":"managed","type":"google_compute_firewall","name":"allow-https","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"allow":[{"ports":["443"],"protocol":"tcp"}],"deny":[],"description":null,"disabled":null,"log_config":[],"name":"mycompany-fw-allow-https","priority":1000,"project":"YOUR-PROJECT-123456","source_ranges":["0.0.0.0/0"],"source_service_accounts":null,"source_tags":null,"target_service_accounts":null,"target_tags":["allow-https"],"timeouts":null},"after_unknown":{"allow":[{"ports":[false]}],"creation_timestamp":true,"deny":[],"destination_ranges":true,"direction":true,"enable_logging":true,"id":true,"log_config":[],"network":true,"self_link":true,"source_ranges":[false],"target_tags":[false]},"before_sensitive":false,"after_sensitive":{"allow":[{"ports":[false]}],"deny":[],"destination_ranges":[],"log_config":[],"source_ranges":[false],"target_tags":[false]}}},{"address":"module.firewall.google_compute_firewall.allow-internal","module_address":"module.firewall","mode":"managed","type":"google_compute_firewall","name":"allow-internal","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"allow":[{"ports":["0-65535"],"protocol":"tcp"},{"ports":["0-65535"],"protocol":"udp"},{"ports":[],"protocol":"icmp"}],"deny":[],"description":null,"disabled":null,"log_config":[{"metadata":"INCLUDE_ALL_METADATA"}],"name":"mycompany-fw-allow-internal","priority":1000,"project":"YOUR-PROJECT-123456","source_ranges":["10.16.0.0/22"],"source_service_accounts":null,"source_tags":null,"target_service_accounts":null,"target_tags":null,"timeouts":null},"after_unknown":{"allow":[{"ports":[false]},{"ports":[false]},{"ports":[]}],"creation_timestamp":true,"deny":[],"destination_ranges":true,"direction":true,"enable_logging":true,"id":true,"log_config":[{}],"network":true,"self_link":true,"source_ranges":[false]},"before_sensitive":false,"after_sensitive":{"allow":[{"ports":[false]},{"ports":[false]},{"ports":[]}],"deny":[],"destination_ranges":[],"log_config":[{}],"source_ranges":[false]}}},{"address":"module.firewall.google_compute_firewall.allow-ssh","module_address":"module.firewall","mode":"managed","type":"google_compute_firewall","name":"allow-ssh","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"allow":[{"ports":["22"],"protocol":"tcp"}],"deny":[],"description":null,"disabled":null,"log_config":[],"name":"mycompany-fw-allow-ssh","priority":1000,"project":"YOUR-PROJECT-123456","source_ranges":["35.235.240.0/20"],"source_service_accounts":null,"source_tags":null,"target_service_accounts":null,"target_tags":["allow-ssh"],"timeouts":null},"after_unknown":{"allow":[{"ports":[false]}],"creation_timestamp":true,"deny":[],"destination_ranges":true,"direction":true,"enable_logging":true,"id":true,"log_config":[],"network":true,"self_link":true,"source_ranges":[false],"target_tags":[false]},"before_sensitive":false,"after_sensitive":{"allow":[{"ports":[false]}],"deny":[],"destination_ranges":[],"log_config":[],"source_ranges":[false],"target_tags":[false]}}},{"address":"module.iam.google_project_iam_binding.bitbucket_role_binding","module_address":"module.iam","mode":"managed","type":"google_project_iam_binding","name":"bitbucket_role_binding","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"condition":[],"project":"YOUR-PROJECT-123456"},"after_unknown":{"condition":[],"etag":true,"id":true,"members":true,"role":true},"before_sensitive":false,"after_sensitive":{"condition":[],"members":[]}}},{"address":"module.iam.google_project_iam_binding.bitbucket_role_binding_artifact","module_address":"module.iam","mode":"managed","type":"google_project_iam_binding","name":"bitbucket_role_binding_artifact","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"condition":[],"project":"YOUR-PROJECT-123456","role":"roles/artifactregistry.writer"},"after_unknown":{"condition":[],"etag":true,"id":true,"members":true},"before_sensitive":false,"after_sensitive":{"condition":[],"members":[]}}},{"address":"module.iam.google_project_iam_custom_role.bitbucket_role","module_address":"module.iam","mode":"managed","type":"google_project_iam_custom_role","name":"bitbucket_role","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"description":"Custom role for Bitbucket pipelines","permissions":["container.clusters.get","container.clusters.getCredentials","container.deployments.get","container.deployments.update","container.ingresses.get","container.ingresses.update","container.services.get","container.services.update","container.statefulSets.get","container.statefulSets.update","iam.serviceAccounts.getAccessToken","run.services.get","run.services.update","storage.buckets.get","storage.objects.create","storage.objects.get","storage.objects.list"],"project":"YOUR-PROJECT-123456","role_id":"bitbucket_role","stage":"GA","title":"Bitbucket Role"},"after_unknown":{"deleted":true,"id":true,"name":true,"permissions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]},"before_sensitive":false,"after_sensitive":{"permissions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]}}},{"address":"module.iam.google_project_iam_custom_role.frontend_role","module_address":"module.iam","mode":"managed","type":"google_project_iam_custom_role","name":"frontend_role","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"description":"Custom role for Frontend","permissions":["logging.logEntries.list","logging.logs.list","monitoring.metricDescriptors.list","monitoring.timeSeries.list","run.locations.get","run.revisions.get","run.revisions.list","run.routes.get","run.routes.list","run.services.get"],"project":"YOUR-PROJECT-123456","role_id":"frontend_role","stage":"GA","title":"Frontend Role"},"after_unknown":{"deleted":true,"id":true,"name":true,"permissions":[false,false,false,false,false,false,false,false,false,false]},"before_sensitive":false,"after_sensitive":{"permissions":[false,false,false,false,false,false,false,false,false,false]}}},{"address":"module.iam.google_service_account.bitbucket_service_account","module_address":"module.iam","mode":"managed","type":"google_service_account","name":"bitbucket_service_account","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"account_id":"bitbucket-service-account","create_ignore_already_exists":null,"description":null,"disabled":false,"display_name":"Bitbucket Service Account","project":"YOUR-PROJECT-123456","timeouts":null},"after_unknown":{"email":true,"id":true,"member":true,"name":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.iam.google_service_account_key.bitbucket_service_account_key","module_address":"module.iam","mode":"managed","type":"google_service_account_key","name":"bitbucket_service_account_key","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"keepers":null,"key_algorithm":"KEY_ALG_RSA_2048","private_key_type":"TYPE_GOOGLE_CREDENTIALS_FILE","public_key_data":null,"public_key_type":"TYPE_X509_PEM_FILE"},"after_unknown":{"id":true,"name":true,"private_key":true,"public_key":true,"service_account_id":true,"valid_after":true,"valid_before":true},"before_sensitive":false,"after_sensitive":{"private_key":true}}},{"address":"module.iam.local_file.bitbucket_service_account_key_file","module_address":"module.iam","mode":"managed","type":"local_file","name":"bitbucket_service_account_key_file","provider_name":"registry.terraform.io/hashicorp/local","change":{"actions":["create"],"before":null,"after":{"content_base64":null,"directory_permission":"0777","file_permission":"0777","filename":"modules/iam/dev-YOUR-PROJECT-123456-bitbucket-service-account-key.json","sensitive_content":null,"source":null},"after_unknown":{"content":true,"content_base64sha256":true,"content_base64sha512":true,"content_md5":true,"content_sha1":true,"content_sha256":true,"content_sha512":true,"id":true},"before_sensitive":false,"after_sensitive":{"content":true,"sensitive_content":true}}},{"address":"module.network.google_compute_address.address[0]","module_address":"module.network","mode":"managed","type":"google_compute_address","name":"address","index":0,"provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"address_type":"EXTERNAL","description":null,"ip_version":null,"ipv6_endpoint_type":null,"labels":null,"name":"nat-manual-ip-0","network":null,"project":"YOUR-PROJECT-123456","region":"europe-west2","timeouts":null},"after_unknown":{"address":true,"creation_timestamp":true,"effective_labels":true,"id":true,"label_fingerprint":true,"network_tier":true,"prefix_length":true,"purpose":true,"self_link":true,"subnetwork":true,"terraform_labels":true,"users":true},"before_sensitive":false,"after_sensitive":{"effective_labels":{},"terraform_labels":{},"users":[]}}},{"address":"module.network.google_compute_global_address.loadbalancer_ip","module_address":"module.network","mode":"managed","type":"google_compute_global_address","name":"loadbalancer_ip","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"address_type":null,"description":null,"ip_version":null,"labels":null,"name":"mycompany-dev-lb-ip","network":null,"project":"YOUR-PROJECT-123456","purpose":null,"timeouts":null},"after_unknown":{"address":true,"creation_timestamp":true,"effective_labels":true,"id":true,"label_fingerprint":true,"prefix_length":true,"self_link":true,"terraform_labels":true},"before_sensitive":false,"after_sensitive":{"effective_labels":{},"terraform_labels":{}}}},{"address":"module.network.google_compute_global_address.private_ip_address","module_address":"module.network","mode":"managed","type":"google_compute_global_address","name":"private_ip_address","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"address":"10.16.5.0","address_type":"INTERNAL","description":null,"ip_version":null,"labels":null,"name":"mycompany-dev-private-services-address","prefix_length":24,"project":"YOUR-PROJECT-123456","purpose":"VPC_PEERING","timeouts":null},"after_unknown":{"creation_timestamp":true,"effective_labels":true,"id":true,"label_fingerprint":true,"network":true,"self_link":true,"terraform_labels":true},"before_sensitive":false,"after_sensitive":{"effective_labels":{},"terraform_labels":{}}}},{"address":"module.network.google_compute_network.network","module_address":"module.network","mode":"managed","type":"google_compute_network","name":"network","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"auto_create_subnetworks":false,"delete_default_routes_on_create":false,"description":"test","enable_ula_internal_ipv6":null,"mtu":1460,"name":"mynet-dev-mycompany","network_firewall_policy_enforcement_order":"AFTER_CLASSIC_FIREWALL","project":"YOUR-PROJECT-123456","routing_mode":"GLOBAL","timeouts":null},"after_unknown":{"gateway_ipv4":true,"id":true,"internal_ipv6_range":true,"numeric_id":true,"self_link":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.network.google_compute_router.router","module_address":"module.network","mode":"managed","type":"google_compute_router","name":"router","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"bgp":[],"description":null,"encrypted_interconnect_router":null,"name":"mynet-dev-mycompany-nat-router","project":"YOUR-PROJECT-123456","region":"europe-west2","timeouts":null},"after_unknown":{"bgp":[],"creation_timestamp":true,"id":true,"network":true,"self_link":true},"before_sensitive":false,"after_sensitive":{"bgp":[]}}},{"address":"module.network.google_compute_router_nat.nat_manual","module_address":"module.network","mode":"managed","type":"google_compute_router_nat","name":"nat_manual","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"drain_nat_ips":null,"icmp_idle_timeout_sec":30,"log_config":[{"enable":true,"filter":"ERRORS_ONLY"}],"max_ports_per_vm":null,"name":"mynet-dev-mycompany-nat-gw","nat_ip_allocate_option":"MANUAL_ONLY","project":"YOUR-PROJECT-123456","region":"europe-west2","router":"mynet-dev-mycompany-nat-router","rules":[],"source_subnetwork_ip_ranges_to_nat":"LIST_OF_SUBNETWORKS","subnetwork":[{"secondary_ip_range_names":[],"source_ip_ranges_to_nat":["ALL_IP_RANGES"]}],"tcp_established_idle_timeout_sec":1200,"tcp_time_wait_timeout_sec":120,"tcp_transitory_idle_timeout_sec":30,"timeouts":null,"udp_idle_timeout_sec":30},"after_unknown":{"auto_network_tier":true,"enable_dynamic_port_allocation":true,"enable_endpoint_independent_mapping":true,"endpoint_types":true,"id":true,"log_config":[{}],"min_ports_per_vm":true,"nat_ips":true,"rules":[],"subnetwork":[{"name":true,"secondary_ip_range_names":[],"source_ip_ranges_to_nat":[false]}]},"before_sensitive":false,"after_sensitive":{"endpoint_types":[],"log_config":[{}],"nat_ips":[],"rules":[],"subnetwork":[{"secondary_ip_range_names":[],"source_ip_ranges_to_nat":[false]}]}}},{"address":"module.network.google_compute_subnetwork.private_subnet","module_address":"module.network","mode":"managed","type":"google_compute_subnetwork","name":"private_subnet","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"description":null,"ip_cidr_range":"10.16.0.0/22","ipv6_access_type":null,"log_config":[{"aggregation_interval":"INTERVAL_15_MIN","filter_expr":"true","flow_sampling":0.5,"metadata":"INCLUDE_ALL_METADATA","metadata_fields":null}],"name":"mynet-dev-mycompany-private","project":"YOUR-PROJECT-123456","region":"europe-west2","role":null,"send_secondary_ip_range_if_empty":null,"timeouts":null},"after_unknown":{"creation_timestamp":true,"external_ipv6_prefix":true,"fingerprint":true,"gateway_address":true,"id":true,"internal_ipv6_prefix":true,"ipv6_cidr_range":true,"log_config":[{}],"network":true,"private_ip_google_access":true,"private_ipv6_google_access":true,"purpose":true,"secondary_ip_range":true,"self_link":true,"stack_type":true},"before_sensitive":false,"after_sensitive":{"log_config":[{}],"secondary_ip_range":[]}}},{"address":"module.network.google_service_networking_connection.private_vpc_connection","module_address":"module.network","mode":"managed","type":"google_service_networking_connection","name":"private_vpc_connection","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"deletion_policy":null,"reserved_peering_ranges":["mycompany-dev-private-services-address"],"service":"servicenetworking.googleapis.com","timeouts":null,"update_on_creation_fail":null},"after_unknown":{"id":true,"network":true,"peering":true,"reserved_peering_ranges":[false]},"before_sensitive":false,"after_sensitive":{"reserved_peering_ranges":[false]}}},{"address":"module.project-services.google_project_service.project_services[\"autoscaling.googleapis.com\"]","module_address":"module.project-services","mode":"managed","type":"google_project_service","name":"project_services","index":"autoscaling.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"autoscaling.googleapis.com","timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.project-services.google_project_service.project_services[\"compute.googleapis.com\"]","module_address":"module.project-services","mode":"managed","type":"google_project_service","name":"project_services","index":"compute.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"compute.googleapis.com","timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.project-services.google_project_service.project_services[\"container.googleapis.com\"]","module_address":"module.project-services","mode":"managed","type":"google_project_service","name":"project_services","index":"container.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"container.googleapis.com","timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.project-services.google_project_service.project_services[\"gkehub.googleapis.com\"]","module_address":"module.project-services","mode":"managed","type":"google_project_service","name":"project_services","index":"gkehub.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"gkehub.googleapis.com","timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.project-services.google_project_service.project_services[\"iamcredentials.googleapis.com\"]","module_address":"module.project-services","mode":"managed","type":"google_project_service","name":"project_services","index":"iamcredentials.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"iamcredentials.googleapis.com","timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.project-services.google_project_service.project_services[\"iap.googleapis.com\"]","module_address":"module.project-services","mode":"managed","type":"google_project_service","name":"project_services","index":"iap.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"iap.googleapis.com","timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.project-services.google_project_service.project_services[\"logging.googleapis.com\"]","module_address":"module.project-services","mode":"managed","type":"google_project_service","name":"project_services","index":"logging.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"logging.googleapis.com","timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.project-services.google_project_service.project_services[\"monitoring.googleapis.com\"]","module_address":"module.project-services","mode":"managed","type":"google_project_service","name":"project_services","index":"monitoring.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"monitoring.googleapis.com","timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.project-services.google_project_service.project_services[\"run.googleapis.com\"]","module_address":"module.project-services","mode":"managed","type":"google_project_service","name":"project_services","index":"run.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"run.googleapis.com","timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.project-services.google_project_service.project_services[\"sql-component.googleapis.com\"]","module_address":"module.project-services","mode":"managed","type":"google_project_service","name":"project_services","index":"sql-component.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"sql-component.googleapis.com","timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.project-services.google_project_service.project_services[\"storage.googleapis.com\"]","module_address":"module.project-services","mode":"managed","type":"google_project_service","name":"project_services","index":"storage.googleapis.com","provider_name":"registry.terraform.io/hashicorp/google","change":{"actions":["create"],"before":null,"after":{"disable_dependent_services":false,"disable_on_destroy":false,"project":"YOUR-PROJECT-123456","service":"storage.googleapis.com","timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}}],"output_changes":{"NAT-IPs":{"actions":["create"],"before":null,"after":[null],"after_unknown":[true],"before_sensitive":false,"after_sensitive":false},"network_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"privatenetwork_subnet":{"actions":["create"],"before":null,"after":"mynet-dev-mycompany-private","after_unknown":false,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.5.7","values":{"outputs":{"privatenetwork_subnet":{"sensitive":false,"value":"mynet-dev-mycompany-private","type":"string"}},"root_module":{}}},"configuration":{"provider_config":{"google":{"name":"google","full_name":"registry.terraform.io/hashicorp/google","expressions":{"project":{"references":["var.project"]},"region":{"references":["var.region"]},"zone":{"references":["var.zone"]}}},"module.iam:local":{"name":"local","full_name":"registry.terraform.io/hashicorp/local","module_address":"module.iam"},"module.project-services:google-beta":{"name":"google-beta","full_name":"registry.terraform.io/hashicorp/google-beta","version_constraint":"\u003e= 3.43.0, \u003c 6.0.0","module_address":"module.project-services"}},"root_module":{"outputs":{"NAT-IPs":{"expression":{"references":["module.network.NAT-IPs","module.network"]}},"network_id":{"expression":{"references":["module.network.network_id","module.network"]}},"privatenetwork_subnet":{"expression":{"references":["module.network.privatenetwork_subnet","module.network"]}}},"module_calls":{"firewall":{"source":"./modules/firewall","expressions":{"company":{"references":["var.company"]},"gke_cluster_ipv4_cidr":{"references":["var.gke_cluster_ipv4_cidr"]},"network_id":{"references":["module.network.network_id","module.network"]},"pri_subnet_cidr":{"references":["var.pri_subnet_cidr"]}},"module":{"resources":[{"address":"google_compute_firewall.allow-gke","mode":"managed","type":"google_compute_firewall","name":"allow-gke","provider_config_key":"google","expressions":{"allow":[{"ports":{"constant_value":["2049"]},"protocol":{"constant_value":"tcp"}}],"name":{"references":["var.company"]},"network":{"references":["var.network_id"]},"source_ranges":{"references":["var.gke_cluster_ipv4_cidr"]},"target_tags":{"constant_value":["allow-gke"]}},"schema_version":1},{"address":"google_compute_firewall.allow-https","mode":"managed","type":"google_compute_firewall","name":"allow-https","provider_config_key":"google","expressions":{"allow":[{"ports":{"constant_value":["443"]},"protocol":{"constant_value":"tcp"}}],"name":{"references":["var.company"]},"network":{"references":["var.network_id"]},"source_ranges":{"constant_value":["0.0.0.0/0"]},"target_tags":{"constant_value":["allow-https"]}},"schema_version":1},{"address":"google_compute_firewall.allow-internal","mode":"managed","type":"google_compute_firewall","name":"allow-internal","provider_config_key":"google","expressions":{"allow":[{"protocol":{"constant_value":"icmp"}},{"ports":{"constant_value":["0-65535"]},"protocol":{"constant_value":"tcp"}},{"ports":{"constant_value":["0-65535"]},"protocol":{"constant_value":"udp"}}],"log_config":[{"metadata":{"constant_value":"INCLUDE_ALL_METADATA"}}],"name":{"references":["var.company"]},"network":{"references":["var.network_id"]},"source_ranges":{"references":["var.pri_subnet_cidr"]}},"schema_version":1},{"address":"google_compute_firewall.allow-ssh","mode":"managed","type":"google_compute_firewall","name":"allow-ssh","provider_config_key":"google","expressions":{"allow":[{"ports":{"constant_value":["22"]},"protocol":{"constant_value":"tcp"}}],"name":{"references":["var.company"]},"network":{"references":["var.network_id"]},"source_ranges":{"constant_value":["35.235.240.0/20"]},"target_tags":{"constant_value":["allow-ssh"]}},"schema_version":1}],"variables":{"company":{},"gke_cluster_ipv4_cidr":{},"network_id":{},"pri_subnet_cidr":{}}},"depends_on":["module.network"]},"iam":{"source":"./modules/iam","expressions":{"company":{"references":["var.company"]},"env":{"references":["var.env"]},"project":{"references":["var.project"]},"region":{"references":["var.region"]}},"module":{"resources":[{"address":"google_project_iam_binding.bitbucket_role_binding","mode":"managed","type":"google_project_iam_binding","name":"bitbucket_role_binding","provider_config_key":"google","expressions":{"members":{"references":["google_service_account.bitbucket_service_account.email","google_service_account.bitbucket_service_account"]},"project":{"references":["var.project"]},"role":{"references":["google_project_iam_custom_role.bitbucket_role.name","google_project_iam_custom_role.bitbucket_role"]}},"schema_version":0},{"address":"google_project_iam_binding.bitbucket_role_binding_artifact","mode":"managed","type":"google_project_iam_binding","name":"bitbucket_role_binding_artifact","provider_config_key":"google","expressions":{"members":{"references":["google_service_account.bitbucket_service_account.email","google_service_account.bitbucket_service_account"]},"project":{"references":["var.project"]},"role":{"constant_value":"roles/artifactregistry.writer"}},"schema_version":0},{"address":"google_project_iam_custom_role.bitbucket_role","mode":"managed","type":"google_project_iam_custom_role","name":"bitbucket_role","provider_config_key":"google","expressions":{"description":{"constant_value":"Custom role for Bitbucket pipelines"},"permissions":{"constant_value":["container.clusters.get","container.clusters.getCredentials","container.deployments.get","container.deployments.update","container.ingresses.get","container.ingresses.update","container.services.get","container.services.update","container.statefulSets.get","container.statefulSets.update","run.services.get","run.services.update","storage.buckets.get","storage.objects.create","storage.objects.get","storage.objects.list","iam.serviceAccounts.getAccessToken"]},"role_id":{"constant_value":"bitbucket_role"},"title":{"constant_value":"Bitbucket Role"}},"schema_version":0},{"address":"google_project_iam_custom_role.frontend_role","mode":"managed","type":"google_project_iam_custom_role","name":"frontend_role","provider_config_key":"google","expressions":{"description":{"constant_value":"Custom role for Frontend"},"permissions":{"constant_value":["run.services.get","run.locations.get","run.routes.get","run.routes.list","run.revisions.get","run.revisions.list","logging.logEntries.list","logging.logs.list","monitoring.timeSeries.list","monitoring.metricDescriptors.list"]},"role_id":{"constant_value":"frontend_role"},"title":{"constant_value":"Frontend Role"}},"schema_version":0},{"address":"google_service_account.bitbucket_service_account","mode":"managed","type":"google_service_account","name":"bitbucket_service_account","provider_config_key":"google","expressions":{"account_id":{"constant_value":"bitbucket-service-account"},"display_name":{"constant_value":"Bitbucket Service Account"}},"schema_version":0},{"address":"google_service_account_key.bitbucket_service_account_key","mode":"managed","type":"google_service_account_key","name":"bitbucket_service_account_key","provider_config_key":"google","expressions":{"public_key_type":{"constant_value":"TYPE_X509_PEM_FILE"},"service_account_id":{"references":["google_service_account.bitbucket_service_account.name","google_service_account.bitbucket_service_account"]}},"schema_version":0,"depends_on":["google_service_account.bitbucket_service_account"]},{"address":"local_file.bitbucket_service_account_key_file","mode":"managed","type":"local_file","name":"bitbucket_service_account_key_file","provider_config_key":"module.iam:local","expressions":{"content":{"references":["google_service_account_key.bitbucket_service_account_key.private_key","google_service_account_key.bitbucket_service_account_key"]},"filename":{"references":["path.module","var.env","var.project"]}},"schema_version":0,"depends_on":["google_service_account_key.bitbucket_service_account_key"]}],"variables":{"company":{},"env":{},"project":{},"region":{}}}},"network":{"source":"./modules/vpc","expressions":{"company":{"references":["var.company"]},"description":{"references":["var.description"]},"env":{"references":["var.env"]},"mtu":{"references":["var.mtu"]},"network_name":{"references":["var.network_name"]},"pri_subnet_cidr":{"references":["var.pri_subnet_cidr"]},"pri_vpc_peering_address":{"references":["var.pri_vpc_peering_address"]},"project":{"references":["var.project"]},"project_id":{"references":["var.project"]},"region":{"references":["var.region"]},"routing_mode":{"references":["var.routing_mode"]}},"module":{"outputs":{"LB-IP":{"expression":{"references":["google_compute_global_address.loadbalancer_ip.address","google_compute_global_address.loadbalancer_ip"]}},"NAT-IPs":{"expression":{"references":["google_compute_address.address"]}},"network":{"expression":{"references":["google_compute_network.network"]},"description":"The VPC resource being created"},"network_id":{"expression":{"references":["google_compute_network.network.id","google_compute_network.network"]},"description":"The ID of the VPC being created"},"network_name":{"expression":{"references":["google_compute_network.network.name","google_compute_network.network"]},"description":"The name of the VPC being created"},"privatenetwork_subnet":{"expression":{"references":["google_compute_subnetwork.private_subnet.name","google_compute_subnetwork.private_subnet"]},"description":"Private subnet"}},"resources":[{"address":"google_compute_address.address","mode":"managed","type":"google_compute_address","name":"address","provider_config_key":"google","expressions":{"name":{"references":["count.index"]},"region":{"references":["var.region"]}},"schema_version":0,"count_expression":{"constant_value":1},"depends_on":["google_compute_router.router"]},{"address":"google_compute_global_address.loadbalancer_ip","mode":"managed","type":"google_compute_global_address","name":"loadbalancer_ip","provider_config_key":"google","expressions":{"name":{"references":["var.company","var.env"]}},"schema_version":0,"depends_on":["google_compute_router.router"]},{"address":"google_compute_global_address.private_ip_address","mode":"managed","type":"google_compute_global_address","name":"private_ip_address","provider_config_key":"google","expressions":{"address":{"references":["var.pri_vpc_peering_address"]},"address_type":{"constant_value":"INTERNAL"},"name":{"references":["var.company","var.env"]},"network":{"references":["google_compute_network.network.id","google_compute_network.network"]},"prefix_length":{"constant_value":24},"purpose":{"constant_value":"VPC_PEERING"}},"schema_version":0,"depends_on":["google_compute_subnetwork.private_subnet"]},{"address":"google_compute_network.network","mode":"managed","type":"google_compute_network","name":"network","provider_config_key":"google","expressions":{"auto_create_subnetworks":{"constant_value":false},"description":{"references":["var.description"]},"mtu":{"references":["var.mtu"]},"name":{"references":["var.network_name","var.env","var.company"]},"project":{"references":["var.project"]},"routing_mode":{"references":["var.routing_mode"]}},"schema_version":0},{"address":"google_compute_router.router","mode":"managed","type":"google_compute_router","name":"router","provider_config_key":"google","expressions":{"name":{"references":["google_compute_network.network.name","google_compute_network.network"]},"network":{"references":["google_compute_network.network.id","google_compute_network.network"]},"region":{"references":["var.region"]}},"schema_version":0},{"address":"google_compute_router_nat.nat_manual","mode":"managed","type":"google_compute_router_nat","name":"nat_manual","provider_config_key":"google","expressions":{"log_config":[{"enable":{"constant_value":true},"filter":{"constant_value":"ERRORS_ONLY"}}],"name":{"references":["google_compute_network.network.name","google_compute_network.network"]},"nat_ip_allocate_option":{"constant_value":"MANUAL_ONLY"},"nat_ips":{"references":["google_compute_address.address"]},"region":{"references":["var.region"]},"router":{"references":["google_compute_router.router.name","google_compute_router.router"]},"source_subnetwork_ip_ranges_to_nat":{"constant_value":"LIST_OF_SUBNETWORKS"},"subnetwork":[{"name":{"references":["google_compute_subnetwork.private_subnet.id","google_compute_subnetwork.private_subnet"]},"source_ip_ranges_to_nat":{"constant_value":["ALL_IP_RANGES"]}}]},"schema_version":0,"depends_on":["google_compute_address.address"]},{"address":"google_compute_subnetwork.private_subnet","mode":"managed","type":"google_compute_subnetwork","name":"private_subnet","provider_config_key":"google","expressions":{"ip_cidr_range":{"references":["var.pri_subnet_cidr"]},"log_config":[{"aggregation_interval":{"constant_value":"INTERVAL_15_MIN"},"flow_sampling":{"constant_value":0.5},"metadata":{"constant_value":"INCLUDE_ALL_METADATA"}}],"name":{"references":["var.network_name","var.env","var.company"]},"network":{"references":["google_compute_network.network.id","google_compute_network.network"]},"region":{"references":["var.region"]}},"schema_version":0,"depends_on":["google_compute_network.network"]},{"address":"google_service_networking_connection.private_vpc_connection","mode":"managed","type":"google_service_networking_connection","name":"private_vpc_connection","provider_config_key":"google","expressions":{"network":{"references":["google_compute_network.network.id","google_compute_network.network"]},"reserved_peering_ranges":{"references":["google_compute_global_address.private_ip_address.name","google_compute_global_address.private_ip_address"]},"service":{"constant_value":"servicenetworking.googleapis.com"}},"schema_version":0,"depends_on":["google_compute_global_address.private_ip_address"]}],"variables":{"company":{},"description":{},"env":{},"mtu":{},"network_name":{},"pri_subnet_cidr":{},"pri_vpc_peering_address":{},"project":{},"project_id":{},"region":{},"routing_mode":{}}}},"project-services":{"source":"terraform-google-modules/project-factory/google//modules/project_services","expressions":{"activate_apis":{},"disable_dependent_services":{"constant_value":false},"disable_services_on_destroy":{"constant_value":false},"project_id":{"references":["var.project"]}},"module":{"outputs":{"enabled_api_identities":{"expression":{"references":["google_project_service_identity.project_service_identities"]},"description":"Enabled API identities in the project"},"enabled_apis":{"expression":{"references":["google_project_service.project_services"]},"description":"Enabled APIs in the project"},"project_id":{"expression":{"references":["google_project_service.project_services","var.project_id"]},"description":"The GCP project you want to enable APIs on"}},"resources":[{"address":"google_project_iam_member.project_service_identity_roles","mode":"managed","type":"google_project_iam_member","name":"project_service_identity_roles","provider_config_key":"google","expressions":{"member":{"references":["each.value.email","each.value"]},"project":{"references":["var.project_id"]},"role":{"references":["each.value.role","each.value"]}},"schema_version":0,"for_each_expression":{"references":["local.add_service_roles"]}},{"address":"google_project_service.project_services","mode":"managed","type":"google_project_service","name":"project_services","provider_config_key":"google","expressions":{"disable_dependent_services":{"references":["var.disable_dependent_services"]},"disable_on_destroy":{"references":["var.disable_services_on_destroy"]},"project":{"references":["var.project_id"]},"service":{"references":["each.value"]}},"schema_version":0,"for_each_expression":{"references":["local.services"]}},{"address":"google_project_service_identity.project_service_identities","mode":"managed","type":"google_project_service_identity","name":"project_service_identities","provider_config_key":"module.project-services:google-beta","expressions":{"project":{"references":["var.project_id"]},"service":{"references":["each.value.api","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.activate_api_identities"]}},{"address":"data.google_compute_default_service_account.default","mode":"data","type":"google_compute_default_service_account","name":"default","provider_config_key":"google","expressions":{"project":{"references":["var.project_id"]}},"schema_version":0,"count_expression":{"references":["local.activate_compute_identity"]}}],"variables":{"activate_api_identities":{"default":[],"description":"    The list of service identities (Google Managed service account for the API) to force-create for the project (e.g. in order to grant additional roles).\n    APIs in this list will automatically be appended to `activate_apis`.\n    Not including the API in this list will follow the default behaviour for identity creation (which is usually when the first resource using the API is created).\n    Any roles (e.g. service agent role) must be explicitly listed. See https://cloud.google.com/iam/docs/understanding-roles#service-agent-roles-roles for a list of related roles.\n"},"activate_apis":{"default":[],"description":"The list of apis to activate within the project"},"disable_dependent_services":{"default":true,"description":"Whether services that are enabled and which depend on this service should also be disabled when this service is destroyed. https://www.terraform.io/docs/providers/google/r/google_project_service.html#disable_dependent_services"},"disable_services_on_destroy":{"default":true,"description":"Whether project services will be disabled when the resources are destroyed. https://www.terraform.io/docs/providers/google/r/google_project_service.html#disable_on_destroy"},"enable_apis":{"default":true,"description":"Whether to actually enable the APIs. If false, this module is a no-op."},"project_id":{"description":"The GCP project you want to enable APIs on"}}},"version_constraint":"~\u003e 14.5"}},"variables":{"company":{},"description":{},"env":{},"gke_cluster_ipv4_cidr":{},"mtu":{},"network_name":{},"pri_subnet_cidr":{},"pri_vpc_peering_address":{},"project":{},"region":{},"routing_mode":{},"zone":{}}}},"relevant_attributes":[{"resource":"module.iam.google_service_account.bitbucket_service_account","attribute":["email"]},{"resource":"module.iam.google_project_iam_custom_role.bitbucket_role","attribute":["name"]},{"resource":"module.network.google_compute_global_address.private_ip_address","attribute":["name"]},{"resource":"module.network.google_compute_router.router","attribute":["name"]},{"resource":"module.network.google_compute_address.address","attribute":[]},{"resource":"module.network.google_compute_network.network","attribute":[]},{"resource":"module.project-services.google_project_service.project_services","attribute":[]},{"resource":"module.iam.google_service_account.bitbucket_service_account","attribute":["name"]},{"resource":"module.network.google_compute_network.network","attribute":["id"]},{"resource":"module.network.google_compute_network.network","attribute":["name"]},{"resource":"module.network.google_compute_subnetwork.private_subnet","attribute":["name"]},{"resource":"module.network.google_compute_global_address.loadbalancer_ip","attribute":["address"]},{"resource":"module.iam.google_service_account_key.bitbucket_service_account_key","attribute":["private_key"]},{"resource":"module.network.google_compute_subnetwork.private_subnet","attribute":["id"]},{"resource":"module.project-services.google_project_service_identity.project_service_identities","attribute":[]}],"timestamp":"2025-01-18T13:25:13Z"}
